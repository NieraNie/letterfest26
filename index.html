<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Letterfest26 ‚Äî Letters Alive</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'brand-yellow': '#fff100',
            'brand-red': '#ea1f1f',
            'brand-blue': '#20b8ed',
          },
          screens: {
            xs: '480px',
          }
        },
        fontFamily: {
          sans: ['Sligoil', 'sans-serif'],
          serif: ['Sligoil', 'sans-serif'],
          mono: ['Sligoil', 'sans-serif'],
          display: ['Sligoil', 'sans-serif'],
          body: ['Sligoil', 'sans-serif'],
        }
      }
    }
  </script>

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <!-- Lenis smooth scroll -->
  <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.29/bundled/lenis.min.js"></script>

  <!-- Matter.js for falling letters -->
  <script src="https://cdn.jsdelivr.net/npm/matter-js@0.20.0/build/matter.min.js"></script>

  <style>
    @font-face {
      font-family: 'Sligoil';
      src: url('./Sligoil-Micro.otf') format('opentype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    :root {
      --red: #ea1f1f;
      --blue: #20b8ed;
      --yellow: #fff100;
      --black: #050505;
      --white: #f1f1f1;
    }

    body {
      font-family: 'Sligoil', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: var(--white);
      color: var(--black);
      overflow-x: hidden;
      cursor: none;
    }

    .display-font,
    h1, h2, h3, h4, h5, h6,
    p, a, span, button, div {
      font-family: 'Sligoil', sans-serif;
    }

    /* subtle noise */
    .noise {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9000;
      opacity: 0.04;
      background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    }

    /* custom cursor */
    .cursor-ball {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 11000;
    }

    .cursor-small {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #ffffff;
      mix-blend-mode: difference;
    }

    .cursor-rose {
      width: 90px;
      height: 90px;
      z-index: 10999;
      mix-blend-mode: normal;
      -webkit-mask-image: url('rose.png');
      mask-image: url('rose.png');
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;
      -webkit-mask-position: center;
      mask-position: center;
      -webkit-mask-size: contain;
      mask-size: contain;
      background-color: #c93937;
      transition: transform 0.15s ease-out, background-color 0.2s ease-out;
    }

    body.hovering .cursor-rose { transform: scale(1.15); }
    body.hovering-shop .cursor-rose { transform: scale(1.3); }
    body.rose-on-light .cursor-rose { background-color: #000; }
    body.rose-on-red   .cursor-rose { background-color: #fff100; }
    body.rose-on-yellow .cursor-rose { background-color: #000; }

    /* preloader */
    .preloader {
      position: fixed;
      inset: 0;
      background: #000;
      color: #fff;
      z-index: 10000;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    /* speakers accordion */
    .accordion-container {
      display: flex;
      width: 100%;
      height: 80vh;
      overflow: hidden;
      border-bottom: 1px solid black;
    }
    .acc-item {
      flex: 1;
      position: relative;
      border-right: 1px solid black;
      transition: flex 0.8s cubic-bezier(0.16,1,0.3,1);
      overflow: hidden;
      background: #000;
    }
    .acc-item:last-child { border-right: none; }
    .acc-item:hover { flex: 3; }

    .acc-img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: grayscale(100%) contrast(1.2);
      opacity: 0.6;
      transition: all 0.6s ease;
    }
    .acc-item:hover .acc-img {
      opacity: 1;
      filter: grayscale(0) contrast(1);
      transform: scale(1.05);
    }
    .acc-img-alan { object-position: 80% center; }

    .acc-label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(-90deg);
      white-space: nowrap;
      font-size: 2rem;
      font-weight: 700;
      text-transform: uppercase;
      color: white;
      pointer-events: none;
      z-index: 20;
      mix-blend-mode: difference;
      width: 500px;
      text-align: center;
    }
    .acc-item:hover .acc-label { opacity: 0; }

    .acc-content {
      position: absolute;
      inset-inline: 0;
      bottom: 0;
      padding: 2rem;
      background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
      transform: translateY(100%);
      transition: transform 0.6s cubic-bezier(0.16,1,0.3,1);
      z-index: 30;
    }
    .acc-item:hover .acc-content { transform: translateY(0); }

    .party-img { object-position: center 45%; }

    ::selection {
      background: var(--red);
      color: #fff;
    }

    /* ticket modal */
    #ticket-modal {
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    #ticket-modal.open {
      opacity: 1;
      pointer-events: auto;
    }
    #ticket-modal .modal-content {
      transform: translateY(50px) scale(0.95);
      transition: transform 0.4s cubic-bezier(0.16,1,0.3,1);
    }
    #ticket-modal.open .modal-content {
      transform: translateY(0) scale(1);
    }

    /* schedule underline base */
    .schedule-underline {
      transform-origin: left center;
      transform: scaleX(0);
    }

    /* falling letters layer */
    .letters-layer {
      position: absolute;
      inset-inline: 0;
      bottom: 0;
      pointer-events: auto;
      overflow: hidden;
    }
    .falling-letter {
      position: absolute;
      width: 96px;   /* ÊîæÂ§ß‰∏ÄÂÄçÁöÑÂ∞∫ÂØ∏Ôºà‰πãÂâçÂ§ßÊ¶Ç 48Ôºâ */
      height: 96px;
      object-fit: contain;
      user-select: none;
      pointer-events: none;
    }

    @media (max-width: 768px) {
      body { cursor: auto; }
      .cursor-ball { display: none !important; }
      .accordion-container { height: 70vh; flex-direction: column; }
      .acc-item { height: 50%; }
      .acc-label { transform: translate(-50%, -50%); }
    }
  </style>
</head>

<body class="antialiased">

<!-- noise texture -->
<div class="noise"></div>

<!-- custom cursor (desktop only) -->
<div class="cursor-ball cursor-small hidden md:block"></div>
<div class="cursor-ball cursor-rose hidden md:block"></div>

<!-- Ticket Modal -->
<div id="ticket-modal" class="fixed inset-0 z-[10001] flex items-center justify-center px-4">
  <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" onclick="closeModal()"></div>

  <div class="modal-content relative w-full max-w-4xl bg-white shadow-[20px_20px_0px_0px_rgba(255,241,0,1)] flex flex-col md:flex-row overflow-hidden border-2 border-black">
    <button onclick="closeModal()" class="absolute top-4 right-4 z-50 w-10 h-10 bg-black text-white rounded-full flex items-center justify-center hover:scale-110 transition-transform hover-trigger">‚úï</button>

    <!-- left: ticket picture -->
    <div class="w-full md:w-1/2 bg-black relative overflow-hidden flex items-center justify-center">
      <div class="relative w-[95%] max-w-[420px] aspect-[227/70]">
        <img id="modal-ticket-back" src="ticket back.png" class="absolute inset-0 w-full h-full object-contain opacity-70 translate-x-3 translate-y-3" alt="Ticket Back">
        <img id="modal-ticket-front" src="ticket blue.png" class="absolute inset-0 w-full h-full object-contain z-10" alt="Ticket Front">
      </div>
      <div class="absolute bottom-6 left-6 text-white pointer-events-none z-20">
        <p class="text-xs uppercase tracking-widest text-brand-yellow">Admit One</p>
        <h3 class="text-2xl md:text-3xl font-bold uppercase display-font" id="modal-ticket-type">General Pass</h3>
      </div>
    </div>

    <!-- right: info -->
    <div class="w-full md:w-1/2 p-8 md:p-12 flex flex-col justify-between bg-white relative">
      <div>
        <div class="flex justify-between items-start mb-8">
          <div class="text-sm font-mono uppercase tracking-[0.2em] text-gray-500">
            LETTERFEST26<br>TICKET
          </div>
          <div class="text-right">
            <span class="block text-4xl font-bold display-font" id="modal-price">¬£18</span>
            <span class="text-xs uppercase text-gray-500">Incl. VAT</span>
          </div>
        </div>

        <div class="space-y-6 font-mono text-sm uppercase">
          <div class="flex justify-between border-b border-black pb-2">
            <span class="text-gray-500">Date</span>
            <span class="font-bold" id="modal-date">June 18, 2026</span>
          </div>
          <div class="flex justify-between border-b border-black pb-2">
            <span class="text-gray-500">Venue</span>
            <span class="font-bold text-right text-brand-yellow">
              50 George Square<br>Edinburgh EH8 9JU
            </span>
          </div>
          <div class="flex justify-between border-b border-black pb-2">
            <span class="text-gray-500">Access</span>
            <span class="font-bold text-right" id="modal-access">1-Day Pass</span>
          </div>

          <!-- quantity -->
          <div class="flex justify-between items-center border-b border-black pb-2">
            <span class="text-gray-500">Quantity</span>
            <div class="flex items-center gap-2">
              <button type="button" class="w-8 h-8 border border-black flex items-center justify-center hover:bg-black hover:text-white transition-colors" onclick="changeTicketQty(-1)">‚Äì</button>
              <span id="ticket-qty" class="w-8 text-center">1</span>
              <button type="button" class="w-8 h-8 border border-black flex items-center justify-center hover:bg-black hover:text-white transition-colors" onclick="changeTicketQty(1)">+</button>
            </div>
          </div>

          <div class="flex justify-between items-center">
            <span class="text-gray-500">Total</span>
            <span id="ticket-total" class="font-bold text-lg">¬£18</span>
          </div>
        </div>
      </div>

      <button id="ticket-add-btn" class="mt-10 w-full bg-[#ea1f1f] text-white py-4 font-bold uppercase hover:bg-black transition-colors hover-trigger">
        Add to Cart
      </button>
    </div>
  </div>
</div>

<!-- Preloader -->
<div class="preloader p-6 md:p-12">
  <div class="flex justify-between items-start">
    <h1 class="font-bold tracking-tighter uppercase">Letterfest26</h1>
    <div class="text-right font-mono text-xs hidden md:block text-gray-400">
      <p>LOADING FULL EXPERIENCE...</p>
      <p>EDINBURGH, UK</p>
    </div>
  </div>
  <div class="text-[15vw] leading-none font-light display-font tracking-tight flex items-end">
    <span id="counter">0</span>%
  </div>
</div>

<!-- NAV -->
<nav class="fixed top-0 left-0 w-full px-6 md:px-8 py-4 md:py-6 flex justify-between items-center z-[60] mix-blend-difference text-white">
  <a href="#top" class="text-xl md:text-2xl font-bold uppercase display-font tracking-tighter hover-trigger">LF‚Äî26</a>

  <div class="hidden md:flex gap-8 items-center font-mono text-xs uppercase tracking-widest">
    <a href="#about" class="hover:text-gray-300 transition-colors hover-trigger">Concept</a>
    <a href="#speakers" class="hover:text-gray-300 transition-colors hover-trigger">Voices</a>
    <a href="#schedule" class="hover:text-gray-300 transition-colors hover-trigger">Program</a>
    <a href="#merch" class="hover:text-gray-300 transition-colors hover-trigger">Shop</a>
  </div>

  <div class="flex items-center gap-4">
    <!-- cart icon -->
    <div class="relative">
      <div class="w-11 h-11 rounded-full border border-white flex items-center justify-center hover:bg-white hover:text-black transition-colors cursor-pointer">
        <span class="text-xs">üõí</span>
      </div>
      <span id="cart-count" class="hidden absolute -top-1 -right-1 bg-brand-red text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center"></span>
    </div>

    <a href="#tickets" class="bg-white text-black px-4 md:px-6 py-2 text-xs font-bold uppercase tracking-widest hover:scale-105 transition-transform hover-trigger">
      Get Tickets
    </a>
  </div>
</nav>

<main id="top">
  <!-- HERO -->
  <section id="hero" class="relative h-screen flex flex-col justify-center items-center overflow-hidden bg-[#f1f1f1] pt-20 md:pt-24" data-bg="light">
    <!-- colour blobs -->
    <div class="absolute w-[40vw] h-[40vw] bg-[#ea1f1f] rounded-full blur-[120px] opacity-20 animate-pulse top-0 right-0 pointer-events-none"></div>
    <div class="absolute w-[30vw] h-[30vw] bg-[#20b8ed] rounded-full blur-[100px] opacity-20 bottom-0 left-0 pointer-events-none"></div>

    <!-- logo -->
    <div id="hero-logo-wrapper" class="relative z-10 flex items-center justify-center select-none">
      <img src="logo.png" alt="Letterfest26 logo" class="hero-logo w-[70vw] max-w-[780px] h-auto" style="mix-blend-mode:normal;filter:none;">
    </div>

    <!-- falling letters layer (click area) -->
    <div id="letters-layer" class="letters-layer" style="top:120px;"></div>

    <div class="absolute bottom-10 w-full px-6 md:px-12 flex justify-between items-end font-mono text-[10px] md:text-xs uppercase tracking-[0.25em] text-black">
      <div>Scroll to explore</div>
      <div class="text-right">June 18‚Äì20 2026<br>Edinburgh</div>
    </div>
  </section>

  <!-- marquee -->
  <div class="py-4 bg-[#050505] text-[#f1f1f1] overflow-hidden border-y border-white/10">
    <div class="marquee-inner whitespace-nowrap flex gap-8">
      <span class="text-3xl md:text-4xl font-bold uppercase display-font">LET LETTERS PLAY, LET FEELINGS PRINT THEMSELVES ‚Ä¢</span>
      <span class="text-3xl md:text-4xl font-bold uppercase display-font">LET LETTERS PLAY, LET FEELINGS PRINT THEMSELVES ‚Ä¢</span>
    </div>
  </div>

  <!-- ABOUT -->
  <section id="about" class="py-24 md:py-32 px-6 md:px-24 bg-[#050505] text-[#f1f1f1] relative border-b border-white/10">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-16 md:gap-24 items-start">
      <div class="reveal-text sticky md:top-32">
        <span class="text-[#ea1f1f] font-mono text-sm tracking-widest uppercase mb-6 block">01 ‚Äî The Concept</span>
        <h2 class="text-4xl md:text-6xl lg:text-7xl font-bold uppercase display-font leading-[0.9] mb-8">
          Not just shapes.<br>Living Characters.
        </h2>
        <p class="text-lg md:text-2xl font-light text-gray-400 leading-relaxed max-w-lg">
          Letterfest26 invites you to witness typography not as a static tool for reading, but as a physical, emotional event.
        </p>
      </div>

      <div class="w-full flex flex-col gap-8 md:gap-12">
        <div class="img-container w-full relative overflow-hidden grayscale hover:grayscale-0 transition-all duration-700">
          <img src="party.png" class="parallax-img max-w-full h-auto mx-auto party-img" alt="Party" />
        </div>
        <img src="O.png" class="parallax-img w-auto h-auto mx-auto max-w-[220px] md:max-w-[260px] transition-transform duration-500 hover:scale-110 hover:rotate-6" alt="Letter O" />
      </div>
    </div>
  </section>

  <!-- SPEAKERS -->
  <section id="speakers" class="bg-[#f1f1f1] border-b border-black">
    <div class="px-6 md:px-12 py-10 md:py-12 flex justify-between items-end border-b border-black">
      <div>
        <span class="text-[#20b8ed] font-mono text-sm tracking-widest uppercase mb-2 block">02 ‚Äî Lineup</span>
        <h2 class="text-5xl md:text-7xl font-bold uppercase display-font text-black">Voices</h2>
      </div>
      <p class="hidden md:block font-mono text-xs uppercase max-w-xs text-right">Six pioneers reshaping typography. Hover to reveal.</p>
    </div>

    <div class="accordion-container">
      <div class="acc-item hover-trigger">
        <img src="sarah.jpeg" class="acc-img" alt="Sarah Boris">
        <div class="acc-label">Sarah Boris</div>
        <div class="acc-content text-white">
          <p class="text-[#ea1f1f] font-mono text-xs uppercase mb-2">Independent Designer</p>
          <h3 class="text-3xl md:text-4xl font-bold uppercase display-font mb-4">Sarah Boris</h3>
          <p class="text-sm opacity-80">Topic: Typography Meets Art</p>
        </div>
      </div>
      <div class="acc-item hover-trigger">
        <img src="neville.jpg" class="acc-img" alt="Neville Brody">
        <div class="acc-label">Neville Brody</div>
        <div class="acc-content text-white">
          <p class="text-[#20b8ed] font-mono text-xs uppercase mb-2">Typographic Pioneer</p>
          <h3 class="text-3xl md:text-4xl font-bold uppercase display-font mb-4">Neville Brody</h3>
          <p class="text-sm opacity-80">Topic: Breaking the Rules</p>
        </div>
      </div>
      <div class="acc-item hover-trigger">
        <img src="gerry.jpg" class="acc-img" alt="Gerry Leonidas">
        <div class="acc-label">Gerry Leonidas</div>
        <div class="acc-content text-white">
          <p class="text-[#fff100] font-mono text-xs uppercase mb-2">Educator</p>
          <h3 class="text-3xl md:text-4xl font-bold uppercase display-font mb-4">Gerry Leonidas</h3>
          <p class="text-sm opacity-80">Topic: Inclusive Future</p>
        </div>
      </div>
      <div class="acc-item hover-trigger">
        <img src="alan.jpg" class="acc-img acc-img-alan" alt="Alan Kitching">
        <div class="acc-label">Alan Kitching</div>
        <div class="acc-content text-white">
          <p class="text-[#ea1f1f] font-mono text-xs uppercase mb-2">Letterpress</p>
          <h3 class="text-3xl md:text-4xl font-bold uppercase display-font mb-4">Alan Kitching</h3>
          <p class="text-sm opacity-80">Topic: Living Craft</p>
        </div>
      </div>
      <div class="acc-item hover-trigger">
        <img src="morag.jpg" class="acc-img" alt="Morag Myerscough">
        <div class="acc-label">Morag Myerscough</div>
        <div class="acc-content text-white">
          <p class="text-[#20b8ed] font-mono text-xs uppercase mb-2">Designer</p>
          <h3 class="text-3xl md:text-4xl font-bold uppercase display-font mb-4">Morag Myerscough</h3>
          <p class="text-sm opacity-80">Topic: Connection</p>
        </div>
      </div>
      <div class="acc-item hover-trigger">
        <img src="Seb.jpg" class="acc-img" alt="Seb Lester">
        <div class="acc-label">Seb Lester</div>
        <div class="acc-content text-white">
          <p class="text-[#fff100] font-mono text-xs uppercase mb-2">Calligrapher</p>
          <h3 class="text-3xl md:text-4xl font-bold uppercase display-font mb-4">Seb Lester</h3>
          <p class="text-sm opacity-80">Topic: Magic of Letters</p>
        </div>
      </div>
    </div>
  </section>

  <!-- SCHEDULE -->
  <section id="schedule" class="bg-white text-black py-20 md:py-24 px-6 md:px-24" data-bg="light">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 md:gap-12">
      <div class="lg:col-span-4 lg:sticky lg:top-24 self-start">
        <span class="text-[#ea1f1f] font-mono text-sm tracking-widest uppercase mb-4 block">03 ‚Äî Program</span>
        <h2 class="text-5xl md:text-6xl font-bold uppercase display-font mb-10">Schedule</h2>
        <div class="flex flex-col border border-black">
          <button onclick="openTab(0)" class="tab-btn active p-4 md:p-6 text-left uppercase font-bold text-xl border-b border-black hover:bg-black hover:text-white transition-colors hover-trigger flex justify-between">
            Thursday <span class="text-xs font-mono opacity-60 mt-1">6.18</span>
          </button>
          <button onclick="openTab(1)" class="tab-btn p-4 md:p-6 text-left uppercase font-bold text-xl border-b border-black hover:bg-black hover:text-white transition-colors hover-trigger flex justify-between">
            Friday <span class="text-xs font-mono opacity-60 mt-1">6.19</span>
          </button>
          <button onclick="openTab(2)" class="tab-btn p-4 md:p-6 text-left uppercase font-bold text-xl hover:bg-black hover:text-white transition-colors hover-trigger flex justify-between">
            Saturday <span class="text-xs font-mono opacity-60 mt-1">6.20</span>
          </button>
        </div>
      </div>

      <div class="lg:col-span-8 min-h-[500px] border-l border-black pl-0 lg:pl-10 pt-6 md:pt-8 bg-white">
        <!-- Day 1 -->
        <div id="day-0" class="schedule-tab block">
          <div class="schedule-row group hover-trigger relative overflow-hidden">
            <div class="py-5 md:py-6 flex flex-col md:flex-row gap-3 md:items-baseline">
              <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">10:00‚Äì10:30</span>
              <div class="flex-1">
                <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Opening Ceremony</h3>
              </div>
            </div>
            <div class="schedule-underline absolute left-0 bottom-0 h-[2px] w-full bg-[#20b8ed]"></div>
          </div>

          <div class="schedule-row group hover-trigger relative overflow-hidden">
            <div class="py-5 md:py-6 flex flex-col md:flex-row gap-3 md:items-baseline">
              <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">10:30‚Äì12:00</span>
              <div class="flex-1">
                <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Talk: Sarah Boris</h3>
              </div>
            </div>
            <div class="schedule-underline absolute left-0 bottom-0 h-[2px] w-full bg-[#ff4b4b]"></div>
          </div>

          <div class="schedule-row group hover-trigger relative overflow-hidden">
            <div class="py-5 md:py-6 flex flex-col md:flex-row gap-3 md:items-baseline">
              <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">12:00‚Äì13:00</span>
              <div class="flex-1">
                <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Printmaking Workshop</h3>
              </div>
            </div>
            <div class="schedule-underline absolute left-0 bottom-0 h-[2px] w-full bg-[#ffba4b]"></div>
          </div>

          <div class="schedule-row group hover-trigger relative overflow-hidden">
            <div class="py-5 md:py-6 flex flex-col md:flex-row gap-3 md:items-baseline">
              <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">14:00‚Äì15:30</span>
              <div class="flex-1">
                <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Exhibit Exploration</h3>
              </div>
            </div>
            <div class="schedule-underline absolute left-0 bottom-0 h-[2px] w-full bg-[#20b8ed]"></div>
          </div>

          <div class="schedule-row group hover-trigger relative overflow-hidden">
            <div class="py-5 md:py-6 flex flex-col md:flex-row gap-3 md:items-baseline">
              <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">16:00‚Äì17:00</span>
              <div class="flex-1">
                <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Talk: Alan Kitching</h3>
              </div>
            </div>
            <div class="schedule-underline absolute left-0 bottom-0 h-[2px] w-full bg-[#ff4b4b]"></div>
          </div>

          <div class="schedule-row group hover-trigger relative overflow-hidden">
            <div class="py-5 md:py-6 flex flex-col md:flex-row gap-3 md:items-baseline">
              <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">17:00‚Äì19:00</span>
              <div class="flex-1">
                <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Welcome Networking Reception</h3>
              </div>
            </div>
            <div class="schedule-underline absolute left-0 bottom-0 h-[2px] w-full bg-[#20b8ed]"></div>
          </div>
        </div>

        <!-- Day 2 -->
        <div id="day-1" class="schedule-tab hidden">
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#20b8ed] font-mono text-lg font-bold w-40">10:00‚Äì11:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Talk &amp; Q&amp;A: Neville Brody</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#20b8ed] font-mono text-lg font-bold w-40">11:00‚Äì11:30</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Coffee Break</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#20b8ed] font-mono text-lg font-bold w-40">11:30‚Äì13:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Calligraphy Jam Type Lab</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#20b8ed] font-mono text-lg font-bold w-40">14:00‚Äì15:30</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Exhibit Exploration</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#20b8ed] font-mono text-lg font-bold w-40">16:00‚Äì17:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Talk &amp; Q&amp;A: Seb Lester</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#20b8ed] font-mono text-lg font-bold w-40">17:00‚Äì19:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Evening Social: ‚ÄúType Trivia‚Äù &amp; Networking</h3>
            </div>
          </div>
        </div>

        <!-- Day 3 -->
        <div id="day-2" class="schedule-tab hidden">
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">10:00‚Äì11:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Talk &amp; Q&amp;A: Gerry Leonidas</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">11:00‚Äì11:30</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Coffee Break</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">12:00‚Äì13:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Printmaking Workshop</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">14:00‚Äì15:30</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Exhibit Exploration</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">16:00‚Äì17:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Talk &amp; Q&amp;A: Morag Myerscough</h3>
            </div>
          </div>
          <div class="border-b border-gray-200 py-5 md:py-6 group hover-trigger flex flex-col md:flex-row gap-3 md:items-baseline">
            <span class="text-[#ea1f1f] font-mono text-lg font-bold w-40">17:00‚Äì19:00</span>
            <div class="flex-1">
              <h3 class="text-2xl md:text-3xl font-bold uppercase display-font">Closing Ceremony &amp; Farewell Party</h3>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- STORE -->
  <section id="merch" class="py-24 bg-[#050505] text-white border-y border-white/20">
    <div class="px-6 md:px-12 mb-16 flex justify-between items-end">
      <div>
        <span class="text-[#fff100] font-mono text-sm tracking-widest uppercase mb-2 block">04 ‚Äî Goods</span>
        <h2 class="text-5xl md:text-6xl font-bold uppercase display-font">Store</h2>
      </div>
      <button
        type="button"
        onclick="openStoreAllModal()"
        class="border-b border-white pb-1 hover:text-[#fff100] hover:border-[#fff100] transition-colors uppercase font-bold text-sm hover-trigger"
      >
        View All
      </button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 border-t border-white/20">
      <!-- Poster Duo Set -->
      <div
        class="shop-item group border-r border-white/20 border-b lg:border-b-0 p-8 hover:bg-[#111] transition-colors relative shop-trigger cursor-pointer"
        onclick="openStoreProduct('Poster Duo Set (2 Posters)', 12, 'poster.png')"
      >
        <div class="aspect-square bg-gray-900 mb-6 overflow-hidden relative">
          <img src="poster.png" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500" alt="Poster Duo Set" />
          <div class="absolute top-2 left-2 bg-brand-blue text-black text-[10px] font-bold uppercase px-2 py-1">
            Posters
          </div>
        </div>
        <div class="flex justify-between items-start">
          <h4 class="text-xl font-bold uppercase display-font">Poster Duo Set</h4>
          <span class="font-mono text-[#fff100]">¬£12</span>
        </div>
      </div>

      <!-- Yellow Tote Bag -->
      <div
        class="shop-item group border-r border-white/20 border-b lg:border-b-0 p-8 hover:bg-[#111] transition-colors relative shop-trigger cursor-pointer"
        onclick="openStoreProduct('Yellow Tote Bag', 12, 'bag1.png')"
      >
        <div class="aspect-square bg-gray-900 mb-6 overflow-hidden relative">
          <img src="bag1.png" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500" alt="Yellow Tote Bag" />
          <div class="absolute top-2 left-2 bg-brand-blue text-black text-[10px] font-bold uppercase px-2 py-1">
            Tote
          </div>
        </div>
        <div class="flex justify-between items-start">
          <h4 class="text-xl font-bold uppercase display-font">Yellow Tote Bag</h4>
          <span class="font-mono text-[#fff100]">¬£12</span>
        </div>
      </div>

      <!-- Printed Gloves -->
      <div
        class="shop-item group border-r border-white/20 border-b lg:border-b-0 p-8 hover:bg-[#111] transition-colors relative shop-trigger cursor-pointer"
        onclick="openStoreProduct('Printed Gloves', 7, 'glove.png')"
      >
        <div class="aspect-square bg-gray-900 mb-6 overflow-hidden relative">
          <img src="glove.png" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500" alt="Printed Gloves" />
          <div class="absolute top-2 left-2 bg-brand-red text-white text-[10px] font-bold uppercase px-2 py-1">
            Apparel
          </div>
        </div>
        <div class="flex justify-between items-start">
          <h4 class="text-xl font-bold uppercase display-font">Printed Gloves</h4>
          <span class="font-mono text-[#fff100]">¬£7</span>
        </div>
      </div>

      <!-- Sticker Pack -->
      <div
        class="shop-item group p-8 hover:bg-[#111] transition-colors relative shop-trigger cursor-pointer"
        onclick="openStoreProduct('Sticker Pack', 5, 'paster.png')"
      >
        <div class="aspect-square bg-gray-900 mb-6 overflow-hidden relative">
          <img src="paster.png" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500" alt="Sticker Pack" />
          <div class="absolute top-2 left-2 bg-brand-yellow text-black text-[10px] font-bold uppercase px-2 py-1">
            Stickers
          </div>
        </div>
        <div class="flex justify-between items-start">
          <h4 class="text-xl font-bold uppercase display-font">Sticker Pack</h4>
          <span class="font-mono text-[#fff100]">¬£5</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Single product modal -->
  <div id="store-product-modal" class="fixed inset-0 z-[10005] hidden items-center justify-center px-4">
    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" onclick="closeStoreProductModal()"></div>

    <div class="relative w-full max-w-3xl bg-white text-black border-2 border-black shadow-[18px_18px_0px_0px_rgba(255,241,0,1)] flex flex-col md:flex-row overflow-hidden">
      <div class="w-full md:w-1/2 bg-black flex items-center justify-center p-6">
        <img id="sp-image" src="" alt="Product" class="w-full h-full object-contain max-h-[260px]" />
      </div>

      <div class="w-full md:w-1/2 p-8 flex flex-col justify-between">
        <button type="button" class="absolute top-4 right-4 w-9 h-9 rounded-full bg-black text-white flex items-center justify-center text-lg" onclick="closeStoreProductModal()">‚úï</button>

        <div>
          <h3 id="sp-name" class="text-2xl md:text-3xl font-bold uppercase display-font mb-2"></h3>
          <p class="font-mono text-xs uppercase text-gray-500 mb-6">Festival Store ¬∑ Letterfest26</p>

          <div class="space-y-4 font-mono text-sm uppercase">
            <div class="flex justify-between border-b border-black pb-2">
              <span class="text-gray-500">Price</span>
              <span id="sp-unit-price" class="font-bold"></span>
            </div>

            <div class="flex justify-between items-center border-b border-black pb-2">
              <span class="text-gray-500">Quantity</span>
              <div class="flex items-center gap-2">
                <button type="button" class="w-8 h-8 border border-black flex items-center justify-center hover:bg-black hover:text-white transition-colors" onclick="changeStoreQty(-1)">‚Äì</button>
                <span id="sp-qty" class="w-8 text-center">1</span>
                <button type="button" class="w-8 h-8 border border-black flex items-center justify-center hover:bg-black hover:text-white transition-colors" onclick="changeStoreQty(1)">+</button>
              </div>
            </div>

            <div class="flex justify-between items-center">
              <span class="text-gray-500">Total</span>
              <span id="sp-total" class="font-bold text-lg"></span>
            </div>
          </div>
        </div>

        <button type="button" class="mt-8 w-full bg-[#ea1f1f] text-white py-3 font-bold uppercase tracking-widest hover:bg-black transition-colors" onclick="addCurrentStoreItemToCart()">
          Add to Cart
        </button>
      </div>
    </div>
  </div>

  <!-- View all products modal -->
  <div id="store-all-modal" class="fixed inset-0 z-[10004] hidden items-center justify-center px-4">
    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" onclick="closeStoreAllModal()"></div>

    <div class="relative w-full max-w-4xl bg-[#050505] text-white border-2 border-white/40 p-8 md:p-10 overflow-y-auto max-h-[90vh]">
      <button type="button" class="absolute top-4 right-4 w-9 h-9 rounded-full bg-white text-black flex items-center justify-center text-lg" onclick="closeStoreAllModal()">‚úï</button>

      <h3 class="text-3xl md:text-4xl font-bold uppercase display-font mb-6">All Goods</h3>
      <p class="font-mono text-xs uppercase text-gray-400 mb-6">
        Tap an item to choose quantity and add it to your cart.
      </p>

      <div class="space-y-3 text-sm font-mono uppercase">
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Poster Duo Set (2 Posters)', 12, 'poster.png')">
          <span>Poster Duo Set (2 Posters)</span><span>¬£12</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Yellow Tote Bag', 12, 'bag1.png')">
          <span>Yellow Tote Bag</span><span>¬£12</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('White Tote Bag', 12, 'bag2.png')">
          <span>White Tote Bag</span><span>¬£12</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Red / White Cap', 13, 'hat.png')">
          <span>Red / White Cap</span><span>¬£13</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Yellow Embroidered Cap', 13, 'hat.png')">
          <span>Yellow Embroidered Cap</span><span>¬£13</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Logo Magnet', 4, 'fridge magnet.png')">
          <span>Logo Magnet</span><span>¬£4</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Sticker Pack', 5, 'paster.png')">
          <span>Sticker Pack</span><span>¬£5</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Printed Gloves', 7, 'glove.png')">
          <span>Printed Gloves</span><span>¬£7</span>
        </button>
        <button type="button" class="w-full flex justify-between items-center py-3 border-b border-white/15 text-left hover:bg-white/5" onclick="openStoreProduct('Wristband Set (3 pcs)', 4, 'wristbands.png')">
          <span>Wristband Set (3 pcs)</span><span>¬£4</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Sponsors -->
  <div class="py-10 md:py-12 bg-white border-b border-black overflow-hidden" data-bg="light">
    <div class="text-center text-xs uppercase tracking-[0.3em] mb-6 md:mb-8 text-gray-400">Supported By</div>
    <div class="marquee-inner whitespace-nowrap flex gap-16 md:gap-24 opacity-60 grayscale hover:grayscale-0 transition-all duration-500">
      <span class="text-xl md:text-2xl font-bold italic">University of Edinburgh ECA</span>
      <span class="text-xl md:text-2xl font-bold">Adobe</span>
      <span class="text-xl md:text-2xl font-bold">Creative Scotland</span>
      <span class="text-xl md:text-2xl font-bold">Colophon Foundry</span>
      <span class="text-xl md:text-2xl font-bold italic">Edinburgh Printmakers</span>
    </div>
  </div>

  <!-- Venue & Tickets -->
  <section id="venue" class="grid grid-cols-1 lg:grid-cols-2 min-h-screen bg-[#ea1f1f] text-white">
    <div class="relative border-b lg:border-b-0 lg:border-r border-black/20 flex flex-col" data-bg="red">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2234.336496666276!2d-3.1895689232840554!3d55.94442537315579!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4887c784e56580d1%3A0x7020d5e165780d0!2s50%20George%20Square%2C%20Edinburgh%20EH8%209JU%2C%20UK!5e0!3m2!1sen!2suk!4v1715000000000!5m2!1sen!2suk"
        class="w-full h-1/2 mix-blend-multiply grayscale contrast-125 invert"
        style="border:0;"
        loading="lazy"
      ></iframe>
      <div class="p-10 md:p-12 flex-1 flex flex-col justify-between bg-[#ea1f1f]">
        <div>
          <h2 class="text-4xl md:text-5xl font-bold uppercase display-font mb-6">Venue</h2>
          <p class="text-lg md:text-xl text-brand-yellow">
            The University of Edinburgh<br />
            50 George Square<br />
            Edinburgh EH8 9JU, UK
          </p>
        </div>
        <div class="mt-8 md:mt-12 opacity-90 text-xs md:text-sm font-mono uppercase text-brand-yellow">
          <p>info@letterfest26.org</p>
          <p>+44 (0)131 555 7826</p>
        </div>
      </div>
    </div>

    <!-- tickets column -->
    <div id="tickets" class="p-10 md:p-16 lg:p-20 flex flex-col justify-center bg-[#fff100] text-black relative overflow-hidden" data-bg="yellow">
      <div class="absolute top-0 right-0 p-6 md:p-8 text-black font-bold animate-pulse text-xs md:text-sm">
        ‚óè Limited availability
      </div>

      <h2 class="text-[10vw] xs:text-[8vw] lg:text-[6vw] font-bold uppercase display-font leading-none mb-10 md:mb-12 text-black">
        Get<br />Access
      </h2>

      <div class="space-y-5 md:space-y-6">
        <!-- General -->
        <div
          onclick="openModal('General Pass', '¬£18')"
          class="group relative bg-white border-2 border-black cursor-pointer hover:-translate-y-2 transition-transform duration-300 hover-trigger"
        >
          <div class="absolute left-[70%] top-0 bottom-0 border-l-2 border-dashed border-black hidden md:block"></div>
          <div class="absolute left-[70%] -top-3 w-6 h-6 bg-[#fff100] rounded-full border-2 border-black -translate-x-1/2 hidden md:block"></div>
          <div class="absolute left-[70%] -bottom-3 w-6 h-6 bg-[#fff100] rounded-full border-2 border-black -translate-x-1/2 hidden md:block"></div>

          <div class="flex flex-col md:flex-row h-full">
            <div class="flex-1 p-6 md:p-8 flex flex-col justify-center">
              <h3 class="text-3xl md:text-4xl font-bold uppercase display-font">General</h3>
              <p class="mt-2 font-mono text-xs md:text-sm uppercase text-gray-600 group-hover:text-black">
                1-Day Pass
              </p>
            </div>
            <div class="md:w-[30%] p-6 md:p-8 flex items-center justify-center md:justify-end">
              <span class="text-4xl md:text-5xl font-bold display-font">¬£18</span>
            </div>
          </div>
        </div>

        <!-- Student -->
        <div
          onclick="openModal('Student Pass', '¬£12')"
          class="group relative bg-white border-2 border-black cursor-pointer hover:-translate-y-2 transition-transform duration-300 hover-trigger"
        >
          <div class="absolute left-[70%] top-0 bottom-0 border-l-2 border-dashed border-black hidden md:block"></div>
          <div class="absolute left-[70%] -top-3 w-6 h-6 bg-[#fff100] rounded-full border-2 border-black -translate-x-1/2 hidden md:block"></div>
          <div class="absolute left-[70%] -bottom-3 w-6 h-6 bg-[#fff100] rounded-full border-2 border-black -translate-x-1/2 hidden md:block"></div>

          <div class="flex flex-col md:flex-row h-full">
            <div class="flex-1 p-6 md:p-8 flex flex-col justify-center">
              <h3 class="text-3xl md:text-4xl font-bold uppercase display-font">Student</h3>
              <p class="mt-2 font-mono text-xs md:text-sm uppercase text-gray-600 group-hover:text-black">
                1-Day Pass / ID Required
              </p>
            </div>
            <div class="md:w-[30%] p-6 md:p-8 flex items-center justify-center md:justify-end">
              <span class="text-4xl md:text-5xl font-bold display-font">¬£12</span>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-16 md:mt-20 pt-6 border-t border-black flex justify-between text-[10px] md:text-xs font-mono uppercase text-black/60">
        <div>¬© 2026 Letterfest</div>
        <div>Designed for Typography</div>
      </div>
    </div>
  </section>
</main>

<script>
  /* ---------- Lenis smooth scroll ---------- */
  const lenis = new Lenis({
    duration: 1.2,
    easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
    direction: 'vertical',
    smooth: true
  });

  function raf(time) {
    lenis.raf(time);
    requestAnimationFrame(raf);
  }
  requestAnimationFrame(raf);

  /* ---------- custom cursor ---------- */
  const cursorSmall = document.querySelector('.cursor-small');
  const cursorRose  = document.querySelector('.cursor-rose');
  const lerp = (a, b, n) => (1 - n) * a + n * b;
  let clientX = -100, clientY = -100;
  let roseX = -100, roseY = -100;

  if (cursorSmall && cursorRose) {
    document.addEventListener('mousemove', e => {
      clientX = e.clientX;
      clientY = e.clientY;
      gsap.set(cursorSmall, { x: clientX - 4, y: clientY - 4 });
    });

    const renderCursor = () => {
      roseX = lerp(roseX, clientX, 0.12);
      roseY = lerp(roseY, clientY, 0.12);
      gsap.set(cursorRose, { x: roseX - 45, y: roseY - 45 });
      requestAnimationFrame(renderCursor);
    };
    renderCursor();

    document.querySelectorAll('.hover-trigger').forEach(el => {
      el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
      el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
    });
    document.querySelectorAll('.shop-trigger').forEach(el => {
      el.addEventListener('mouseenter', () => document.body.classList.add('hovering-shop'));
      el.addEventListener('mouseleave', () => document.body.classList.remove('hovering-shop'));
    });

    document.querySelectorAll('[data-bg]').forEach(el => {
      const type = el.getAttribute('data-bg');
      el.addEventListener('mouseenter', () => {
        document.body.classList.remove('rose-on-light','rose-on-red','rose-on-yellow');
        if (type === 'light') document.body.classList.add('rose-on-light');
        if (type === 'red') document.body.classList.add('rose-on-red');
        if (type === 'yellow') document.body.classList.add('rose-on-yellow');
      });
      el.addEventListener('mouseleave', () => {
        document.body.classList.remove('rose-on-light','rose-on-red','rose-on-yellow');
      });
    });
  }

  /* ---------- Ticket modal logic ---------- */
  const modal = document.getElementById('ticket-modal');
  const modalType = document.getElementById('modal-ticket-type');
  const modalPrice = document.getElementById('modal-price');
  const modalDate = document.getElementById('modal-date');
  const modalAccess = document.getElementById('modal-access');
  const modalFront = document.getElementById('modal-ticket-front');
  const modalBack  = document.getElementById('modal-ticket-back');
  const ticketQtySpan = document.getElementById('ticket-qty');
  const ticketTotalSpan = document.getElementById('ticket-total');
  const ticketAddBtn = document.getElementById('ticket-add-btn');

  let ticketUnitPrice = 18;
  let ticketQty = 1;

  window.openModal = function(type, priceText) {
    modalType.innerText = type;
    modalPrice.innerText = priceText;

    const price = parseInt(priceText.replace('¬£',''), 10);
    ticketUnitPrice = price;
    ticketQty = 1;
    ticketQtySpan.textContent = '1';
    ticketTotalSpan.textContent = priceText;

    if (type === 'General Pass') {
      modalDate.innerText = 'June 18, 2026';
      modalAccess.innerText = '1-Day Pass (General)';
      modalFront.src = 'ticket blue.png';
    } else {
      modalDate.innerText = 'June 19, 2026';
      modalAccess.innerText = '1-Day Pass (Student)';
      modalFront.src = 'ticket red.png';
    }
    modalBack.src = 'ticket back.png';

    modal.classList.add('open');
  };

  window.closeModal = function() {
    modal.classList.remove('open');
  };

  window.changeTicketQty = function(delta) {
    let q = ticketQty + delta;
    if (q < 1) q = 1;
    if (q > 15) q = 15;
    ticketQty = q;
    ticketQtySpan.textContent = String(q);
    ticketTotalSpan.textContent = '¬£' + (ticketUnitPrice * q);
  };

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
  });

  /* ---------- cart counter (shared) ---------- */
  window.cartCount = window.cartCount || 0;
  const cartBadge = document.getElementById('cart-count');

  function updateCartBadge() {
    if (!cartBadge) return;
    cartBadge.textContent = window.cartCount;
    cartBadge.classList.toggle('hidden', window.cartCount === 0);
  }

  function animateToCart(startEl) {
    if (!startEl || !cartBadge) return;
    const rectStart = startEl.getBoundingClientRect();
    const cartRect = cartBadge.getBoundingClientRect();
    const ghost = document.createElement('div');
    ghost.className = 'fixed w-6 h-6 rounded-full bg-[#ea1f1f] z-[10010] pointer-events-none';
    ghost.style.left = rectStart.left + rectStart.width/2 - 12 + 'px';
    ghost.style.top = rectStart.top + rectStart.height/2 - 12 + 'px';
    document.body.appendChild(ghost);

    gsap.to(ghost, {
      x: cartRect.left + cartRect.width/2 - (rectStart.left + rectStart.width/2),
      y: cartRect.top + cartRect.height/2 - (rectStart.top + rectStart.height/2),
      scale: 0.3,
      opacity: 0.2,
      duration: 0.6,
      ease: 'power2.inOut',
      onComplete: () => ghost.remove()
    });
  }

  if (ticketAddBtn) {
    ticketAddBtn.addEventListener('click', () => {
      window.cartCount += ticketQty;
      updateCartBadge();
      animateToCart(ticketAddBtn);
      closeModal();
    });
  }

  /* ---------- Schedule tab logic ---------- */
  window.openTab = function(index) {
    const tabBtns = document.querySelectorAll('.tab-btn');
    const tabs = document.querySelectorAll('.schedule-tab');

    tabBtns.forEach((btn, i) => {
      if (i === index) btn.classList.add('active');
      else btn.classList.remove('active');
    });
    tabs.forEach((tab, i) => {
      if (i === index) {
        tab.classList.remove('hidden');
        gsap.fromTo(tab, { opacity: 0, y: 10 }, { opacity: 1, y: 0, duration: 0.4 });
      } else {
        tab.classList.add('hidden');
      }
    });
  };

  /* ---------- GSAP basic animations ---------- */
  const tl = gsap.timeline();
  const counterEl = document.getElementById('counter');
  let count = 0;
  const counterInterval = setInterval(() => {
    count += 2;
    if (count > 100) count = 100;
    counterEl.textContent = count;
    if (count === 100) clearInterval(counterInterval);
  }, 20);

  gsap.registerPlugin(ScrollTrigger);

  tl.to(".preloader", {
    y: "-100%",
    delay: 2,
    duration: 1.2,
    ease: "power4.inOut",
    onComplete: () => {
      window.scrollTo(0,0);
      lenis.scrollTo(0, { immediate: true });
    }
  }).from(".hero-logo", {
    y: 40,
    opacity: 0,
    duration: 1.2,
    ease: "power3.out"
  }, "-=0.6");

  gsap.to(".marquee-inner", {
    xPercent: -50,
    repeat: -1,
    duration: 24,
    ease: "linear"
  });

  gsap.utils.toArray('.img-container').forEach(container => {
    const img = container.querySelector('img');
    gsap.to(img, {
      y: -50,
      scale: 1.1,
      scrollTrigger: {
        trigger: container,
        scrub: true
      }
    });
  });

  gsap.utils.toArray('.reveal-text').forEach(el => {
    gsap.from(el, {
      y: 50,
      opacity: 0,
      duration: 1,
      scrollTrigger: {
        trigger: el,
        start: "top 80%"
      }
    });
  });

  // schedule animation for Day 0 underlines
  const scheduleRows = gsap.utils.toArray('#day-0 .schedule-row');
  if (scheduleRows.length) {
    const underlines = scheduleRows.map(row => row.querySelector('.schedule-underline'));
    gsap.timeline({
      scrollTrigger: {
        trigger: '#schedule',
        start: 'top 70%',
        once: true
      }
    })
    .from(scheduleRows, {
      y: 40,
      opacity: 0,
      duration: 0.7,
      ease: 'power3.out',
      stagger: 0.15
    }, 0)
    .to(underlines, {
      scaleX: 1,
      duration: 0.7,
      ease: 'power3.out',
      stagger: 0.15
    }, 0);
  }

  /* ---------- Store modals JS ---------- */
  let currentStoreProduct = { name: '', price: 0, img: '', qty: 1 };

  const spModal = document.getElementById('store-product-modal');
  const spImg = document.getElementById('sp-image');
  const spName = document.getElementById('sp-name');
  const spUnit = document.getElementById('sp-unit-price');
  const spQty = document.getElementById('sp-qty');
  const spTotal = document.getElementById('sp-total');

  window.openStoreProduct = function(name, price, imgSrc) {
    currentStoreProduct = { name, price, img: imgSrc, qty: 1 };
    spImg.src = imgSrc;
    spName.textContent = name;
    spUnit.textContent = `¬£${price}`;
    spQty.textContent = '1';
    spTotal.textContent = `¬£${price}`;
    spModal.classList.remove('hidden');
    spModal.classList.add('flex');
  };

  window.closeStoreProductModal = function() {
    spModal.classList.add('hidden');
    spModal.classList.remove('flex');
  };

  window.changeStoreQty = function(delta) {
    let q = currentStoreProduct.qty + delta;
    if (q < 1) q = 1;
    if (q > 15) q = 15;
    currentStoreProduct.qty = q;
    spQty.textContent = String(q);
    spTotal.textContent = `¬£${currentStoreProduct.price * q}`;
  };

  window.addCurrentStoreItemToCart = function() {
    const qty = currentStoreProduct.qty || 1;
    window.cartCount += qty;
    updateCartBadge();
    animateToCart(spModal.querySelector('button.mt-8, button.mt-8'));
    closeStoreProductModal();
  };

  const storeAllModal = document.getElementById('store-all-modal');
  window.openStoreAllModal = function() {
    storeAllModal.classList.remove('hidden');
    storeAllModal.classList.add('flex');
  };
  window.closeStoreAllModal = function() {
    storeAllModal.classList.add('hidden');
    storeAllModal.classList.remove('flex');
  };

  /* ---------- Falling letters with Matter.js ---------- */
  const {
    Engine,
    Render,
    Runner,
    World,
    Bodies,
    Body,
    Composite,
    Events
  } = Matter;

  const lettersLayer = document.getElementById('letters-layer');
  const heroSection = document.getElementById('hero');
  const heroLogoWrapper = document.getElementById('hero-logo-wrapper');

  let engine = Engine.create();
  let world = engine.world;
  engine.gravity.y = 1.2;

  const runner = Runner.create();
  Runner.run(runner, engine);

  let heroBounds = heroSection.getBoundingClientRect();
  let layerBounds = lettersLayer.getBoundingClientRect();

  function updateBounds() {
    heroBounds = heroSection.getBoundingClientRect();
    layerBounds = lettersLayer.getBoundingClientRect();
  }
  window.addEventListener('resize', updateBounds);

  // static walls
  function createWalls() {
    World.clear(world, false);
    const width = layerBounds.width;
    const height = layerBounds.height;

    const floor = Bodies.rectangle(width / 2, height + 40, width, 80, { isStatic: true });
    const leftWall = Bodies.rectangle(-40, height / 2, 80, height, { isStatic: true });
    const rightWall = Bodies.rectangle(width + 40, height / 2, 80, height, { isStatic: true });

    World.add(world, [floor, leftWall, rightWall]);
  }
  createWalls();

  const letters = 'abcdefghijklmnopqrstuvwxyz'.split('');
  const letterImages = letters.map(ch => ch === 'o' ? 'o2.png' : `${ch}.png`);
  let letterIndex = 0;
  const bodies = [];

  // hero logo offset
  let logoOffsetY = 0;
  const logoMaxOffset = -80;

  function spawnLetter(x, y) {
    if (letterIndex >= letterImages.length) return;

    const imgSrc = letterImages[letterIndex];
    letterIndex++;

    const size = 96; // same as CSS
    const localX = x - layerBounds.left;
    const localY = y - layerBounds.top;

    const body = Bodies.rectangle(localX, localY, size, size, {
      restitution: 0.3,
      friction: 0.8,
      frictionAir: 0.02,
      density: 0.002
    });

    const imgEl = document.createElement('img');
    imgEl.src = imgSrc;
    imgEl.className = 'falling-letter';
    lettersLayer.appendChild(imgEl);

    bodies.push({ body, el: imgEl });
    World.add(world, body);

    // move logo up a little
    logoOffsetY -= 6;
    if (logoOffsetY < logoMaxOffset) logoOffsetY = logoMaxOffset;
    heroLogoWrapper.style.transform = `translateY(${logoOffsetY}px)`;
  }

  lettersLayer.addEventListener('click', e => {
    spawnLetter(e.clientX, e.clientY);
  });

  // sync DOM with physics
  Events.on(engine, 'afterUpdate', () => {
    bodies.forEach(item => {
      const { body, el } = item;
      const x = body.position.x - layerBounds.left;
      const y = body.position.y - layerBounds.top;
      const angle = body.angle;
      el.style.transform = `translate(${x - 48}px, ${y - 48}px) rotate(${angle}rad)`;
    });
  });

  // recompute walls on resize
  window.addEventListener('resize', () => {
    updateBounds();
    createWalls();
  });

</script>
</body>
</html>
